import{_ as ve}from"../chunks/preload-helper.D6kgxu3v.js";import{s as we,n as k,o as Te,i as _e}from"../chunks/scheduler.Bmg8oFKD.js";import{S as Ce,i as Ee,e as x,s as E,c as y,a as A,d as p,f as O,y as Oe,o as v,g as T,z as Se,t as I,b as z,p as G,h,A as Ae,j as Re}from"../chunks/index.ttLCn4K3.js";function V(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}var je=typeof global=="object"&&global&&global.Object===Object&&global,Le=typeof self=="object"&&self&&self.Object===Object&&self,Pe=je||Le||Function("return this")(),_=Pe.Symbol,te=Object.prototype,Ue=te.hasOwnProperty,$e=te.toString,C=_?_.toStringTag:void 0;function Ne(e){var t=Ue.call(e,C),r=e[C];try{e[C]=void 0;var n=!0}catch{}var o=$e.call(e);return n&&(t?e[C]=r:delete e[C]),o}var De=Object.prototype,Me=De.toString;function We(e){return Me.call(e)}var ke="[object Null]",Ie="[object Undefined]",Z=_?_.toStringTag:void 0;function ze(e){return e==null?e===void 0?Ie:ke:Z&&Z in Object(e)?Ne(e):We(e)}function Ge(e){return e!=null&&typeof e=="object"}var Ve="[object Symbol]";function Ze(e){return typeof e=="symbol"||Ge(e)&&ze(e)==Ve}function He(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Je=Array.isArray,Be=1/0,H=_?_.prototype:void 0,J=H?H.toString:void 0;function re(e){if(typeof e=="string")return e;if(Je(e))return He(e,re)+"";if(Ze(e))return J?J.call(e):"";var t=e+"";return t=="0"&&1/e==-Be?"-0":t}function ne(e){return e==null?"":re(e)}function Fe(e,t,r,n){for(var o=-1,a=e==null?0:e.length;++o<a;)r=t(r,e[o],o,e);return r}function Ye(e){return function(t){return e==null?void 0:e[t]}}var qe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ke=Ye(qe),Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe="\\u0300-\\u036f",et="\\ufe20-\\ufe2f",tt="\\u20d0-\\u20ff",rt=Qe+et+tt,nt="["+rt+"]",ot=RegExp(nt,"g");function it(e){return e=ne(e),e&&e.replace(Xe,Ke).replace(ot,"")}var ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function st(e){return e.match(ut)||[]}var at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function ct(e){return at.test(e)}var oe="\\ud800-\\udfff",lt="\\u0300-\\u036f",ft="\\ufe20-\\ufe2f",dt="\\u20d0-\\u20ff",pt=lt+ft+dt,ie="\\u2700-\\u27bf",ue="a-z\\xdf-\\xf6\\xf8-\\xff",bt="\\xac\\xb1\\xd7\\xf7",ht="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gt="\\u2000-\\u206f",mt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",se="A-Z\\xc0-\\xd6\\xd8-\\xde",xt="\\ufe0e\\ufe0f",ae=bt+ht+gt+mt,ce="['’]",B="["+ae+"]",yt="["+pt+"]",le="\\d+",vt="["+ie+"]",fe="["+ue+"]",de="[^"+oe+ae+le+ie+ue+se+"]",wt="\\ud83c[\\udffb-\\udfff]",Tt="(?:"+yt+"|"+wt+")",_t="[^"+oe+"]",pe="(?:\\ud83c[\\udde6-\\uddff]){2}",be="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+se+"]",Ct="\\u200d",F="(?:"+fe+"|"+de+")",Et="(?:"+m+"|"+de+")",Y="(?:"+ce+"(?:d|ll|m|re|s|t|ve))?",q="(?:"+ce+"(?:D|LL|M|RE|S|T|VE))?",he=Tt+"?",ge="["+xt+"]?",Ot="(?:"+Ct+"(?:"+[_t,pe,be].join("|")+")"+ge+he+")*",St="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",At="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rt=ge+he+Ot,jt="(?:"+[vt,pe,be].join("|")+")"+Rt,Lt=RegExp([m+"?"+fe+"+"+Y+"(?="+[B,m,"$"].join("|")+")",Et+"+"+q+"(?="+[B,m+F,"$"].join("|")+")",m+"?"+F+"+"+Y,m+"+"+q,At,St,le,jt].join("|"),"g");function Pt(e){return e.match(Lt)||[]}function Ut(e,t,r){return e=ne(e),t=t,t===void 0?ct(e)?Pt(e):st(e):e.match(t)||[]}var $t="['’]",Nt=RegExp($t,"g");function Dt(e){return function(t){return Fe(Ut(it(t).replace(Nt,"")),e,"")}}var Mt=Dt(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Wt=Object.defineProperty,kt=(e,t,r)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t,r)=>(kt(e,typeof t!="symbol"?t+"":t,r),r);function It(e,t){let r;const n=()=>{r!==void 0&&t&&t(r),r=void 0};return[()=>r===void 0?r=e(n):r,n]}class zt{constructor(t,r={}){this.scope=t,this.options=r}print(t,...r){const n=new Date,o=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(n),{textColor:a,bgColor:u}=this.options,i="font-weight: bold;padding: 0 5px;border-radius:5px";console[t](`%c${o}%c / %c${this.scope}`,`${i};background-color: lightblue;color:black`,"",`${i};${a?`color:${a};`:""}${u?`background-color:${u}`:""}`,...r)}error(...t){this.print("error",...t)}log(...t){this.print("log",...t)}}const Gt=new zt("SDK",{bgColor:"forestgreen",textColor:"white"});class K{constructor(){$(this,"listeners",new Map),$(this,"listenersCount",0),$(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(t,...r){this.subscribeListeners.forEach(n=>n({event:t,args:r})),(this.listeners.get(t)||[]).forEach(([n,o])=>{n(...r),o&&this.off(t,n)})}on(t,r,n){let o=this.listeners.get(t);return o||this.listeners.set(t,o=[]),o.push([r,n]),this.listenersCount+=1,()=>this.off(t,r)}off(t,r){const n=this.listeners.get(t)||[];for(let o=0;o<n.length;o+=1)if(r===n[o][0]){n.splice(o,1),this.listenersCount-=1;return}}subscribe(t){return this.subscribeListeners.push(t),()=>this.unsubscribe(t)}unsubscribe(t){for(let r=0;r<this.subscribeListeners.length;r+=1)if(this.subscribeListeners[r]===t){this.subscribeListeners.splice(r,1);return}}}function X(e,t,r){return window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)}function Vt(...e){let t=!1;const r=e.flat(1);return[n=>!t&&r.push(n),()=>{t||(t=!0,r.forEach(n=>n()))},t]}class N extends Error{constructor(t,r,n){super(r,{cause:n}),this.type=t,Object.setPrototypeOf(this,N.prototype)}}function j(e,t,r){return new N(e,t,r)}const Zt="ERR_UNKNOWN_ENV",Ht="ERR_UNEXPECTED_TYPE",me="ERR_PARSE";function L(){return j(Ht,"Value has unexpected type")}class xe{constructor(t,r,n){this.parser=t,this.isOptional=r,this.type=n}parse(t){if(!(this.isOptional&&t===void 0))try{return this.parser(t)}catch(r){throw j(me,`Unable to parse value${this.type?` as ${this.type}`:""}`,r)}}optional(){return this.isOptional=!0,this}}function D(e,t){return()=>new xe(e,!1,t)}const w=D(e=>{if(typeof e=="boolean")return e;const t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;throw L()},"boolean");function Jt(e,t){const r={};for(const n in e){const o=e[n];if(!o)continue;let a,u;if(typeof o=="function"||"parse"in o)a=n,u=typeof o=="function"?o:o.parse.bind(o);else{const{type:i}=o;a=o.from||n,u=typeof i=="function"?i:i.parse.bind(i)}try{const i=u(t(a));i!==void 0&&(r[n]=i)}catch(i){throw j(me,`Unable to parse field "${n}"`,i)}}return r}function Bt(e){let t=e;if(typeof t=="string"&&(t=JSON.parse(t)),typeof t!="object"||t===null||Array.isArray(t))throw L();return t}function g(e,t){return new xe(r=>{const n=Bt(r);return Jt(e,o=>n[o])},!1,t)}const R=D(e=>{if(typeof e=="number")return e;if(typeof e=="string"){const t=Number(e);if(!Number.isNaN(t))return t}throw L()},"number"),l=D(e=>{if(typeof e=="string"||typeof e=="number")return e.toString();throw L()},"string");function Ft(e){return g({eventType:l(),eventData:t=>t}).parse(e)}function Yt(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]})}function qt(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function Kt(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{let t=window;e.forEach((r,n,o)=>{if(n===o.length-1){t[r]=qt;return}r in t||(t[r]={}),t=t[r]})})}const Xt={clipboard_text_received:g({req_id:l(),data:e=>e===null?e:l().optional().parse(e)}),custom_method_invoked:g({req_id:l(),result:e=>e,error:l().optional()}),popup_closed:{parse(e){return g({button_id:t=>t==null?void 0:l().parse(t)}).parse(e??{})}},viewport_changed:g({height:R(),width:e=>e==null?window.innerWidth:R().parse(e),is_state_stable:w(),is_expanded:w()})};function Qt(){const e=new K,t=new K;t.subscribe(n=>{e.emit("event",{name:n.event,payload:n.args[0]})}),Kt();const[,r]=Vt(Yt,X("resize",()=>{t.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),X("message",n=>{if(n.source!==window.parent)return;let o;try{o=Ft(n.data)}catch{return}const{eventType:a,eventData:u}=o,i=Xt[a];try{const c=i?i.parse(u):u;t.emit(...c?[a,c]:[a])}catch(c){Gt.error(`An error occurred processing the "${a}" event from the Telegram application.
Please, file an issue here:
https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,o,c)}}),()=>e.clear(),()=>t.clear());return[{on:t.on.bind(t),off:t.off.bind(t),subscribe(n){return e.on("event",n)},unsubscribe(n){e.off("event",n)},get count(){return t.count+e.count}},r]}const[er,hr]=It(e=>{const[t,r]=Qt(),n=t.off.bind(t);return t.off=(o,a)=>{const{count:u}=t;n(o,a),u&&!t.count&&e()},[t,r]},([,e])=>e());function tr(){return er()[0]}function rr(e,t,r){return tr().on(e,t,r)}function ye(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function nr(e){return"external"in e&&ye(e.external)&&"notify"in e.external&&typeof e.external.notify=="function"}function or(e){return"TelegramWebviewProxy"in e&&ye(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&typeof e.TelegramWebviewProxy.postEvent=="function"}function ir(){try{return window.self!==window.top}catch{return!0}}const ur="https://web.telegram.org";let sr=ur;function ar(){return sr}function cr(e,t,r){let n={},o;if(n={},ir())return window.parent.postMessage(JSON.stringify({eventType:e,eventData:o}),n.targetOrigin||ar());if(nr(window)){window.external.notify(JSON.stringify({eventType:e,eventData:o}));return}if(or(window)){window.TelegramWebviewProxy.postEvent(e,JSON.stringify(o));return}throw j(Zt,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.")}g({id:R(),type:l(),title:l(),photoUrl:{type:l().optional(),from:"photo_url"},username:l().optional()},"Chat").optional();g({addedToAttachmentMenu:{type:w().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:w().optional(),from:"allows_write_to_pm"},firstName:{type:l(),from:"first_name"},id:R(),isBot:{type:w().optional(),from:"is_bot"},isPremium:{type:w().optional(),from:"is_premium"},languageCode:{type:l().optional(),from:"language_code"},lastName:{type:l().optional(),from:"last_name"},photoUrl:{type:l().optional(),from:"photo_url"},username:l().optional()},"User").optional();function Q(e,t,r){const n=e.slice();return n[5]=t[r],n[7]=r,n}function ee(e){let t,r,n,o=e[1][e[7]]+"",a,u,i,c,s,b=e[5]+"",S,P,U,M;return{c(){t=x("div"),r=E(),n=x("div"),a=I(o),u=E(),i=x("br"),c=E(),s=x("div"),S=I(b),P=E(),this.h()},l(d){t=y(d,"DIV",{class:!0,style:!0}),A(t).forEach(p),r=O(d),n=y(d,"DIV",{});var f=A(n);a=z(f,o),u=O(f),i=y(f,"BR",{}),c=O(f),s=y(f,"DIV",{title:!0,role:!0,class:!0});var W=A(s);S=z(W,b),W.forEach(p),P=O(f),f.forEach(p),this.h()},h(){v(t,"class","thumb svelte-1a0zu56"),G(t,"background-color",e[5]),v(s,"title","click to copy"),v(s,"role","button"),v(s,"class","color svelte-1a0zu56")},m(d,f){T(d,t,f),T(d,r,f),T(d,n,f),h(n,a),h(n,u),h(n,i),h(n,c),h(n,s),h(s,S),h(n,P),U||(M=Ae(s,"click",function(){_e(e[2](e[5]))&&e[2](e[5]).apply(this,arguments)}),U=!0)},p(d,f){e=d,f&1&&G(t,"background-color",e[5]),f&1&&b!==(b=e[5]+"")&&Re(S,b)},d(d){d&&(p(t),p(r),p(n)),U=!1,M()}}}function lr(e){let t,r,n,o='<a href="https://github.com/alexeipanov/theme-miniapp" style="color: var(--tg-theme-link-color);">https://github.com/alexeipanov/theme-miniapp</a>',a=V(e[0]),u=[];for(let i=0;i<a.length;i+=1)u[i]=ee(Q(e,a,i));return{c(){t=x("div");for(let i=0;i<u.length;i+=1)u[i].c();r=E(),n=x("footer"),n.innerHTML=o,this.h()},l(i){t=y(i,"DIV",{class:!0});var c=A(t);for(let s=0;s<u.length;s+=1)u[s].l(c);c.forEach(p),r=O(i),n=y(i,"FOOTER",{class:!0,"data-svelte-h":!0}),Oe(n)!=="svelte-yzujl3"&&(n.innerHTML=o),this.h()},h(){v(t,"class","list"),v(n,"class","svelte-1a0zu56")},m(i,c){T(i,t,c);for(let s=0;s<u.length;s+=1)u[s]&&u[s].m(t,null);T(i,r,c),T(i,n,c)},p(i,[c]){if(c&7){a=V(i[0]);let s;for(s=0;s<a.length;s+=1){const b=Q(i,a,s);u[s]?u[s].p(b,c):(u[s]=ee(b),u[s].c(),u[s].m(t,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=a.length}},i:k,o:k,d(i){i&&(p(t),p(r),p(n)),Se(u,i)}}}function fr(e,t,r){let n=[],o=["accentTextColor","bgColor","buttonColor","buttonTextColor","destructiveTextColor","headerBgColor","hintColor","linkColor","secondaryBgColor","sectionBgColor","sectionHeaderTextColor","subtitleTextColor","textColor"];const a=c=>o.map(s=>getComputedStyle(c).getPropertyValue(`--tg-theme-${Mt(s)}`));let u;return Te(async()=>{await ve(()=>import("../chunks/index.D9Nb2HTe.js").then(s=>s.i),[],import.meta.url),u=window.Telegram.WebApp,u.ready(),u.expand();const c=document.querySelector("html");r(0,n=a(c)),rr("theme_changed",()=>{cr("web_app_ready")})}),[n,o,c=>{navigator.clipboard.writeText(c)}]}class gr extends Ce{constructor(t){super(),Ee(this,t,fr,lr,we,{})}}export{gr as component};
